"use strict";(self["webpackChunkv2"]=self["webpackChunkv2"]||[]).push([[985],{3985:function(e,t,s){s.r(t),s.d(t,{default:function(){return C}});var a=function(){var e=this,t=e._self._c;return t("div",{staticClass:"record"},[t("VueAudioPlayer",{attrs:{"audio-list":e.audioList,"before-play":e.onBeforePlay}})],1)},i=[],r=function(){var e=this,t=e._self._c;return t("div",{staticClass:"vue-audio-player"},[t("div",{staticClass:"vue-audio-player__btn-wrap"},[e.showPlaybackRate?t("div",{staticClass:"vue-audio-player__play-rate",style:{color:e.themeColor}},[t("span",{on:{click:function(t){t.stopPropagation(),e.isShowRates=!e.isShowRates}}},[e._v(e._s(e.playbackRate.toFixed(1)+"x"))]),t("transition",{attrs:{name:"fade-rate"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowRates,expression:"isShowRates"}],staticClass:"vue-audio-player__play-rate__dropdown",style:{backgroundColor:e.themeColor}},e._l(e.playbackRates,(function(s){return t("div",{key:"pr_"+s,on:{click:function(t){return t.stopPropagation(),e.handleSetPlaybackRate(s)}}},[e._v(" "+e._s(s.toFixed(1)+"x")+" ")])})),0)])],1):e._e(),e.showPrevButton?t("div",{staticClass:"vue-audio-player__play-prev",class:{disable:!e.isLoop&&0===e.currentPlayIndex},style:{color:e.themeColor},on:{click:function(t){return t.stopPropagation(),e.playPrev.apply(null,arguments)}}},[e._t("play-prev",(function(){return[t("svg",{staticClass:"vue-audio-player__play-icon",attrs:{t:"1717510776733",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3657",width:"200",height:"200"}},[t("path",{attrs:{d:"M744.4353125 43.919375L280.94 425.3525 280.94 104.4359375a38.5096875 38.5096875 0 1 0-77.47875-0.916875l0 816.5034375a38.5096875 38.5096875 0 1 0 77.47875 0L280.94 596.35625l463.4953125 383.7253125a45.845625 45.845625 0 0 0 76.1034375-33.92625L820.53875 77.845625a45.845625 45.845625 0 0 0-76.1034375-33.92625z","p-id":"3658"}})])]}))],2):e._e(),e.isLoading&&e.showPlayLoading?t("div",{staticClass:"vue-audio-player__play-loading"},e._l(8,(function(s){return t("span",{key:s,style:{backgroundColor:e.themeColor}})})),0):[!e.isPlaying&&e.showPlayButton?t("div",{staticClass:"vue-audio-player__play-start",style:{color:e.themeColor},on:{click:function(t){return t.stopPropagation(),e.play.apply(null,arguments)}}},[e._t("play-start",(function(){return[t("svg",{staticClass:"vue-audio-player__play-icon",attrs:{t:"1717510855219",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3799",width:"200",height:"200"}},[t("path",{attrs:{d:"M512 8.97941504c277.81531056 0 503.02058496 225.20527562 503.02058496 503.02058496s-225.20527562 503.02058496-503.02058496 503.02058496S8.97941504 789.81531056 8.97941504 512 234.18468944 8.97941504 512 8.97941504z m-70.12698734 325.48390806c-26.63050141 0-48.23079685 21.60029545-48.23079807 48.23079686v253.81827015a48.23079685 48.23079685 0 0 0 74.26951062 40.56712988l199.46245688-128.1518906a48.23079685 48.23079685 0 0 0-0.35507283-81.37097702l-199.46245689-125.66637833a48.23079685 48.23079685 0 0 0-25.71322921-7.42695094z","p-id":"3800"}})])]}))],2):e.showPlayButton?t("div",{staticClass:"vue-audio-player__play-pause",style:{color:e.themeColor},on:{click:function(t){return t.stopPropagation(),e.pause.apply(null,arguments)}}},[e._t("play-pause",(function(){return[t("svg",{staticClass:"vue-audio-player__play-icon",attrs:{t:"1717510886292",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"3945",width:"200",height:"200"}},[t("path",{attrs:{d:"M512 1012.62222187C234.38222187 1012.62222187 11.37777813 789.61777813 11.37777813 512S234.38222187 11.37777813 512 11.37777813s500.62222187 223.0044448 500.62222187 500.62222187-223.0044448 500.62222187-500.62222187 500.62222187z m136.53333333-682.66666667c-27.30666667 0-45.51111147 18.2044448-45.51111146 45.51111147v273.06666666c0 27.30666667 18.2044448 45.51111147 45.51111146 45.51111147s45.51111147-18.2044448 45.51111147-45.51111147V375.46666667c0-27.30666667-18.2044448-45.51111147-45.51111147-45.51111147zM375.46666667 329.9555552c-27.30666667 0-45.51111147 18.2044448-45.51111147 45.51111147v273.06666666c0 27.30666667 18.2044448 45.51111147 45.51111147 45.51111147s45.51111147-18.2044448 45.51111146-45.51111147V375.46666667c0-27.30666667-18.2044448-45.51111147-45.51111146-45.51111147z","p-id":"3946"}})])]}))],2):e._e()],e.showNextButton?t("div",{staticClass:"vue-audio-player__play-next",class:{disable:!e.isLoop&&e.currentPlayIndex===e.audioList.length-1},style:{color:e.themeColor},on:{click:function(t){return t.stopPropagation(),e.playNext.apply(null,arguments)}}},[e._t("play-next",(function(){return[t("svg",{staticClass:"vue-audio-player__play-icon",attrs:{t:"1717510922648",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4091",width:"200",height:"200"}},[t("path",{attrs:{d:"M279.5646875 980.080625L743.06 598.6475 743.06 919.5640625a38.5096875 38.5096875 0 1 0 77.47875 0.916875l0-816.5034375a38.5096875 38.5096875 0 1 0-77.47875 0L743.06 427.64375l-463.4953125-383.7253125a45.845625 45.845625 0 0 0-76.1034375 33.92625L203.46125 946.154375a45.845625 45.845625 0 0 0 76.1034375 33.92625z","p-id":"4092"}})])]}))],2):e._e(),e.showVolumeButton?t("div",{staticClass:"vue-audio-player__play-volume-icon-wrap"},[t("svg",{staticClass:"vue-audio-player__play-icon",style:{color:e.themeColor},attrs:{t:"1717511047008",viewBox:"0 0 1024 1024",version:"1.1",xmlns:"http://www.w3.org/2000/svg","p-id":"4233",width:"200",height:"200"},on:{click:function(t){return t.stopPropagation(),e.handleVolumeIconTouchstart.apply(null,arguments)}}},[t("path",{attrs:{d:"M1009.6852389 501.04265842v72.84551793c-12.28886699 137.14708366-93.42867683 254.45999047-208.60559588 317.12488904L762.68733667 817.14116381A318.92799715 318.92799715 0 0 0 928.10158763 537.46541682a319.0112165 319.0112165 0 0 0-175.15102891-284.80766635l38.33682717-73.87190158c120.33657856 61.22241365 205.74836509 181.25385159 218.39785301 322.25680953z m-165.69165255 27.96202667a248.96745017 248.96745017 0 0 1-120.17013874 213.51559395l-38.55874617-74.0660827a165.77487189 165.77487189 0 0 0 75.50856761-139.44951125 165.77487189 165.77487189 0 0 0-78.03291762-141.08617842l38.44778667-74.01060238a248.96745017 248.96745017 0 0 1 122.80544825 215.0967808zM625.26285255 162.75206827V872.89877618c0 56.72851683-70.04376747 84.24670094-109.29601764 42.94168462l-182.44667619-166.55159523H110.71162937a83.2203173 83.2203173 0 0 1-83.2203173-83.2203173V388.44556857a83.2203173 83.2203173 0 0 1 78.31031808-83.0816165l5.60350208-0.1387008 224.9167781 3.74491478 179.67266474-189.13204224c39.22451001-41.33275762 109.2960165-13.78683221 109.29601764 42.94168348z","p-id":"4234"}})]),t("transition",{attrs:{name:"fade-volume"}},[t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowVolume,expression:"isShowVolume"}],ref:"playVolumeWrap",staticClass:"vue-audio-player__play-volume-wrap",on:{click:function(t){return t.stopPropagation(),e.handleVolumePanmove.apply(null,arguments)}}},[t("div",{ref:"playVolume",staticClass:"vue-audio-player__play-volume",style:{height:100*e.currentVolume+"%",backgroundColor:e.themeColor}})])])],1):e._e(),t("div",{directives:[{name:"show",rawName:"v-show",value:e.isShowErrorMessage,expression:"isShowErrorMessage"}],staticClass:"vue-audio-player__notice"},[e._v(" "+e._s(e.noticeMessage)+" ")])],2),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showProgressBar,expression:"showProgressBar"}],ref:"audioProgressWrap",staticClass:"vue-audio-player__progress-wrap",style:{cursor:e.disabledProgressClick?"auto":"pointer"},on:{click:function(t){return t.stopPropagation(),e.handleClickProgressWrap.apply(null,arguments)}}},[t("div",{ref:"audioProgress",staticClass:"vue-audio-player__progress",style:{backgroundColor:e.themeColor}}),t("div",{ref:"audioProgressPoint",staticClass:"vue-audio-player__progress-point",style:{backgroundColor:e.themeColor,boxShadow:`0 0 10px 0 ${e.themeColor}`,cursor:e.disabledProgressDrag?"auto":"pointer"}})]),t("div",{directives:[{name:"show",rawName:"v-show",value:e.showProgressBar,expression:"showProgressBar"}],staticClass:"vue-audio-player__time-wrap"},[t("div",{staticClass:"vue-audio-player__current-time"},[e._v(" "+e._s(e.currentTimeFormatted)+" ")]),t("div",{staticClass:"vue-audio-player__duration"},[e._v(" "+e._s(e.durationFormatted)+" ")])]),t("audio",e._b({ref:"audio",staticClass:"vue-audio-player__audio",attrs:{src:e.audioList?.[e.currentPlayIndex]?.src||e.audioList?.[e.currentPlayIndex],preload:"auto"},on:{ended:e.onEnded,durationchange:e.onDurationchange}},"audio",e.$attrs,!1),[e._v(" 浏览器太老咯，请升级浏览器吧~ ")])])},o=[],n={name:"VueAudioPlayer",inheritAttrs:!1,props:{audioList:{require:!0,default:()=>[],type:Array},showPlayButton:{default:!0,type:Boolean},showPrevButton:{default:!0,type:Boolean},showNextButton:{default:!0,type:Boolean},showVolumeButton:{default:!0,type:Boolean},showProgressBar:{default:!0,type:Boolean},beforePlay:{default:null,type:Function},beforePrev:{default:null,type:Function},beforeNext:{default:null,type:Function},isLoop:{type:Boolean,default:!0},isAutoPlayNext:{type:Boolean,default:!0},progressInterval:{default:500,type:Number},showPlaybackRate:{type:Boolean,default:!0},showPlayLoading:{type:Boolean,default:!0},playbackRates:{type:Array,default:()=>[.5,1,1.5,2]},themeColor:{type:String,default:"#EC4141"},disabledProgressDrag:{type:Boolean,default:!1},disabledProgressClick:{type:Boolean,default:!1}},emits:["pause","play-prev","play-next","timeupdate","durationchange","ended","progress-start","progress-end","progress-move","progress-click","playing","play","play-error"],data(){return{isIOS:/iPhone|iPad|iPod/i.test(navigator?.userAgent),isPlaying:!1,isDragging:!1,isDraggingVolume:!1,isShowErrorMessage:!1,isLoading:!1,isShowVolume:!1,isShowRates:!1,timer:null,noticeMessage:"",duration:0,currentPlayIndex:0,currentTime:"",currentVolume:1,playbackRate:1,canProgressDrag:!0}},computed:{currentTimeFormatted(){return this.currentTime?this.formatTime(this.currentTime):"00:00"},durationFormatted(){return this.duration?this.formatTime(this.duration):"00:00"}},mounted(){this.$nextTick((()=>{this.$refs.audioProgressPoint.addEventListener("mousedown",this.handleProgressPanstart),document.addEventListener("mousemove",this.handleProgressPanmove),document.addEventListener("mouseup",this.handleProgressPanend),this.$refs.playVolumeWrap.addEventListener("touchmove",this.handleVolumePanmove),this.$refs.audioProgressPoint.addEventListener("touchstart",this.handleProgressPanstart),document.addEventListener("touchmove",this.handleProgressPanmove),document.addEventListener("touchend",this.handleProgressPanend)}))},beforeUnmount(){this.pause(),this.$refs.audioProgressPoint.removeEventListener("mousedown",this.handleProgressPanstart),document.removeEventListener("mousemove",this.handleProgressPanmove),document.removeEventListener("mouseup",this.handleProgressPanend),this.$refs.playVolumeWrap.removeEventListener("mousemove",this.handleVolumePanmove),this.$refs.audioProgressPoint.removeEventListener("touchstart",this.handleProgressPanstart),document.removeEventListener("touchmove",this.handleProgressPanmove),document.removeEventListener("touchend",this.handleProgressPanend)},methods:{updateMediaMetadata(){"mediaSession"in navigator&&(navigator.mediaSession.metadata=new MediaMetadata({title:this.audioList[this.currentPlayIndex].title,artist:this.audioList[this.currentPlayIndex].artist,album:this.audioList[this.currentPlayIndex].album,artwork:this.audioList[this.currentPlayIndex].artwork}),navigator.mediaSession.setActionHandler("play",(()=>{this.play()})),navigator.mediaSession.setActionHandler("pause",(()=>{this.pause()})),navigator.mediaSession.setActionHandler("previoustrack",(()=>{this.playPrev()})),navigator.mediaSession.setActionHandler("nexttrack",(()=>{this.playNext()})))},handleVolumeIconTouchstart(){this.isShowVolume=!this.isShowVolume},handleVolumePanmove(e){let t,s,a=this.$refs.playVolumeWrap.getBoundingClientRect(),i=e.pageY||e.touches[0].pageY;t=Math.round(a.bottom-i),s=t/this.$refs.playVolumeWrap.offsetHeight,s=Math.min(s,1),s=Math.max(s,0),this.$refs.audio.volume=s,this.currentVolume=s},handleSetPlaybackRate(e){this.playbackRate=+e,this.$refs.audio.playbackRate=+e,this.isShowRates=!1},handleShowErrorMessage(e={}){this.noticeMessage=e.message,this.isShowErrorMessage=!0,setTimeout((()=>{this.isShowErrorMessage=!1}),e.duration||3e3)},onDurationchange(e){this.duration||(this.duration=this.$refs.audio.duration),this.$emit("durationchange",e)},formatTime(e){let t=0;return t=Math.floor(e/60),e=Math.ceil(e%60),e>=60&&(t++,e=0),t=String(t),e=String(e),t=1===t.length?"0"+t:t,e=1===e.length?"0"+e:e,t+":"+e},onEnded(e){setTimeout((()=>{this.pause(),this.isLoop&&this.isAutoPlayNext&&this.playNext(),this.$emit("ended",e)}),this.progressInterval)},handleProgressPanstart(e){this.canProgressDrag=!1,this.disabledProgressDrag||(this.isDragging=!0,this.$emit("progress-start",e))},handleProgressPanend(e){!this.disabledProgressDrag&&this.isDragging&&(this.isDragging=!1,this.play({currentTime:this.currentTime}),this.$emit("progress-end",e))},handleProgressPanmove(e){if(this.disabledProgressDrag||!this.isDragging)return;let t=e.pageX||e.touches[0].pageX,s=this.$refs.audioProgressPoint.getBoundingClientRect(),a=parseInt(getComputedStyle(this.$refs.audioProgressPoint).left),i=a+(t-s.left);i=Math.min(i,this.$refs.audioProgressWrap.offsetWidth),i=Math.max(i,0),this.setPointPosition(i),this.$refs.audioProgress.style.width=i+"px",this.currentTime=i/this.$refs.audioProgressWrap.offsetWidth*this.duration,this.$emit("progress-move",e)},handleClickProgressWrap(e){if(this.disabledProgressClick||!this.canProgressDrag)return void(this.canProgressDrag=!0);let t=e.target,s=e.pageX||e.touches[0].pageX,a=t.getBoundingClientRect(),i=parseInt(getComputedStyle(t).left),r=i+(s-a.left);t!==this.$refs.audioProgressPoint&&(this.currentTime=r/this.$refs.audioProgressWrap.offsetWidth*this.duration,this.play({currentTime:this.currentTime}),this.setPointPosition(r),this.$refs.audioProgress.style.width=r+"px",this.canProgressDrag=!0,this.$emit("progress-click",e))},setPointPosition(e){this.$refs.audioProgressPoint.style.left=e-this.$refs.audioProgressPoint.offsetWidth/2+"px"},playing(){if(this.isDragging)return;let e=this.$refs.audio.currentTime/this.$refs.audio.duration*this.$refs.audioProgressWrap.offsetWidth;this.currentTime=this.$refs.audio.currentTime,this.$refs.audioProgress.style.width=e+"px",this.setPointPosition(e),this.$emit("playing")},play(e={}){this.isLoading=!0;let t=()=>{this.$refs.audio.play().then((()=>{this.$nextTick((()=>{e?.currentTime&&(this.$refs.audio.currentTime=e.currentTime),this.timer?this.currentTime=this.$refs.audio.currentTime:this.timer=setInterval(this.playing,this.progressInterval),this.isPlaying=!0,this.isLoading=!1,this.$refs.audio.playbackRate=this.playbackRate,this.$emit("play")}))})).catch((e=>{this.handleShowErrorMessage({message:e.message}),9===e.code&&this.isAutoPlayNext&&setTimeout((()=>{this.playNext()}),3e3),this.isLoading=!1,this.$emit("play-error",e)})),this.updateMediaMetadata()};this.isIOS&&(console.log("为了解决 iOS 设备接口异步请求后出现无法播放问题，请无视 The play() request was interrupted by a call to pause() 错误"),this.$refs.audio.play(),this.$refs.audio.pause()),this.beforePlay?this.beforePlay((e=>{!1!==e&&t()})):t()},pause(){this.$refs.audio.pause(),this.$nextTick((()=>{this.clearTimer(),this.isPlaying=!1,this.$emit("pause")}))},playPrev(){if(this.currentPlayIndex<=0&&!this.isLoop)return;this.clearTimer(),this.duration=0;let e=()=>{this.currentPlayIndex<=0&&this.isLoop?this.currentPlayIndex=this.audioList.length-1:this.currentPlayIndex--,this.$nextTick((()=>{this.play(),this.$emit("play-prev")}))};this.beforePrev?this.beforePrev((t=>{!1!==t&&e()})):e()},clearTimer(){clearInterval(this.timer),this.timer=null},playNext(){if(this.currentPlayIndex+1>=this.audioList.length&&!this.isLoop)return;this.clearTimer(),this.duration=0;let e=()=>{this.currentPlayIndex+1>=this.audioList.length&&this.isLoop?this.currentPlayIndex=0:this.currentPlayIndex++,this.$nextTick((()=>{this.play(),this.$emit("play-next")}))};this.beforeNext?this.beforeNext((t=>{!1!==t&&e()})):e()}}},l=n,u=s(1656),d=(0,u.A)(l,r,o,!1,null,null,null),h=d.exports;h.install=e=>{e.component(h.name,h)};var c=h,p=function(){var e=this,t=e._self._c;return t("div",{ref:"dragDiv",staticClass:"drag"},[t("div",{staticClass:"drag_bg"}),t("div",{staticClass:"drag_text"},[e._v(e._s(e.confirmWords))]),t("div",{ref:"moveDiv",staticClass:"handler handler_bg",class:{handler_ok_bg:e.confirmSuccess},staticStyle:{position:"absolute",top:"0px",left:"0px"},on:{mousedown:function(t){return e.mousedownFn(t)}}})])},m=[],g={data(){return{beginClientX:0,mouseMoveStata:!1,maxwidth:"",confirmWords:"拖动滑块验证",confirmSuccess:!1}},mounted(){this.maxwidth=this.$refs.dragDiv.clientWidth-this.$refs.moveDiv.clientWidth,document.getElementsByTagName("html")[0].addEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].addEventListener("mouseup",this.moseUpFn)},methods:{mousedownFn:function(e){this.confirmSuccess||(e.preventDefault&&e.preventDefault(),this.mouseMoveStata=!0,this.beginClientX=e.clientX)},successFunction(){this.confirmSuccess=!0,this.confirmWords="验证通过",window.addEventListener?(document.getElementsByTagName("html")[0].removeEventListener("mousemove",this.mouseMoveFn),document.getElementsByTagName("html")[0].removeEventListener("mouseup",this.moseUpFn)):document.getElementsByTagName("html")[0].removeEventListener("mouseup",(()=>{})),document.getElementsByClassName("drag_text")[0].style.color="#fff",document.getElementsByClassName("handler")[0].style.left=this.maxwidth+"px",document.getElementsByClassName("drag_bg")[0].style.width=this.maxwidth+"px"},mouseMoveFn(e){if(this.mouseMoveStata){let t=e.clientX-this.beginClientX;t>0&&t<=this.maxwidth?(document.getElementsByClassName("handler")[0].style.left=t+"px",document.getElementsByClassName("drag_bg")[0].style.width=t+"px"):t>this.maxwidth&&this.successFunction()}},moseUpFn(e){this.mouseMoveStata=!1;var t=e.clientX-this.beginClientX;t<this.maxwidth&&(document.getElementsByClassName("handler")[0].style.left="0px",document.getElementsByClassName("drag_bg")[0].style.width="0px")}}},y=g,v=(0,u.A)(y,p,m,!1,null,"33723946",null),f=v.exports;s(4114),s(6573),s(8100),s(7936),s(7467),s(4732),s(9577),s(4603),s(7566),s(8721);class w{constructor(e,t){window.URL=window.URL||window.webkitURL,navigator.getUserMedia=navigator.getUserMedia||navigator.webkitGetUserMedia||navigator.mozGetUserMedia||navigator.msGetUserMedia,t=t||{},t.sampleBits=t.sampleBits||16,t.sampleRate=t.sampleRate||16e3,this.context=new(window.webkitAudioContext||window.AudioContext),this.audioInput=this.context.createMediaStreamSource(e),this.createScript=this.context.createScriptProcessor||this.context.createJavaScriptNode,this.recorder=this.createScript.apply(this.context,[4096,1,1]),this.audioData={size:0,buffer:[],inputSampleRate:this.context.sampleRate,inputSampleBits:16,outputSampleRate:t.sampleRate,oututSampleBits:t.sampleBits,input:function(e){this.buffer.push(new Float32Array(e)),this.size+=e.length},compress:function(){let e=new Float32Array(this.size),t=0;for(let n=0;n<this.buffer.length;n++)e.set(this.buffer[n],t),t+=this.buffer[n].length;let s=parseInt(this.inputSampleRate/this.outputSampleRate),a=e.length/s,i=new Float32Array(a),r=0,o=0;while(r<a)i[r]=e[o],o+=s,r++;return i},encodeWAV:function(){let e=Math.min(this.inputSampleRate,this.outputSampleRate),t=Math.min(this.inputSampleBits,this.oututSampleBits),s=this.compress(),a=s.length*(t/8),i=new ArrayBuffer(44+a),r=new DataView(i),o=1,n=0,l=function(e){for(let t=0;t<e.length;t++)r.setUint8(n+t,e.charCodeAt(t))};if(l("RIFF"),n+=4,r.setUint32(n,36+a,!0),n+=4,l("WAVE"),n+=4,l("fmt "),n+=4,r.setUint32(n,16,!0),n+=4,r.setUint16(n,1,!0),n+=2,r.setUint16(n,o,!0),n+=2,r.setUint32(n,e,!0),n+=4,r.setUint32(n,o*e*(t/8),!0),n+=4,r.setUint16(n,o*(t/8),!0),n+=2,r.setUint16(n,t,!0),n+=2,l("data"),n+=4,r.setUint32(n,a,!0),n+=4,8===t)for(let u=0;u<s.length;u++,n++){let e=Math.max(-1,Math.min(1,s[u])),t=e<0?32768*e:32767*e;t=parseInt(255/(65535/(t+32768))),r.setInt8(n,t,!0)}else for(let u=0;u<s.length;u++,n+=2){let e=Math.max(-1,Math.min(1,s[u]));r.setInt16(n,e<0?32768*e:32767*e,!0)}return new Blob([r],{type:"audio/wav"})}}}start(){this.audioInput.connect(this.recorder),this.recorder.connect(this.context.destination);let e=this;this.recorder.onaudioprocess=function(t){e.audioData.input(t.inputBuffer.getChannelData(0))}}stop(){this.recorder.disconnect()}getBlob(){return this.stop(),this.audioData.encodeWAV()}play(e){e.src=window.URL.createObjectURL(this.getBlob())}clear(){this.audioData.buffer=[],this.audioData.size=0}static throwError(e){throw console.log("Error:"+e),new function(){this.toString=function(){return e}}}static canRecording(){return null!=navigator.getUserMedia}static get(e,t){if(e){if(!w.canRecording())return void w.throwError("当前浏览器不支持录音功能。");navigator.getUserMedia({audio:!0},(function(s){let a=new w(s,t);e(a)}),(function(e){switch(e.code||e.name){case"PERMISSION_DENIED":case"PermissionDeniedError":w.throwError("用户拒绝提供信息。");break;case"NOT_SUPPORTED_ERROR":case"NotSupportedError":w.throwError("浏览器不支持硬件设备。");break;case"MANDATORY_UNSATISFIED_ERROR":case"MandatoryUnsatisfiedError":w.throwError("无法发现指定的硬件设备。");break;default:w.throwError("无法打开麦克风。异常信息:"+(e.code||e.name));break}}))}}}class P{startRecord(e){let t=this;try{w.get((s=>{console.log("init recorder component now."),t.recorder=s,t.recorder.start(),console.log("start record now."),e.success("record successfully!")}))}catch(s){e.error("record failed!"+s)}}stopRecord(e){console.log("stop record now.");let t=this;try{let s=t.recorder.getBlob();e.success(s)}catch(s){e.error("record stop failed!"+s)}}play(e){console.log("start play record now.");let t=this;try{t.recorder.play(e),console.log("play successfully.")}catch(s){console.log("play record failed!"+s)}}}var x={name:"Record",data(){return{audioList:[{src:"http://music.163.com/song/media/outer/url?id=317151.mp3",title:"Audio Title 1",artist:"Artist Name 1",album:"Album Name 1",artwork:[{src:"https://upload.jianshu.io/users/upload_avatars/1696356/c358e43854eb?imageMogr2/auto-orient/strip|imageView2/1/w/96/h/96/format/webp",sizes:"512x512",type:"image/jpg"}]},{src:"http://downsc.chinaz.net/Files/DownLoad/sound1/201906/11582.mp3",title:"Audio Title 2"}],isFinished:!1,audio:"",resText:"语音识别返回内容",recorder:new P,isClicking:!1,recognition:new webkitSpeechRecognition||new SpeechRecognition}},components:{SilderCode:f,VueAudioPlayer:c},methods:{}},_=x,b=(0,u.A)(_,a,i,!1,null,"68c1bd1f",null),C=b.exports}}]);
//# sourceMappingURL=985.764cfbb4.js.map